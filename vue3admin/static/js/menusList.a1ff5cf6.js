(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["menusList"],{"5ad0":function(e,t,a){"use strict";a("fb60")},"5d1b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("7a23"),o=a("3fd4");function s(e){const t=Object(n["O"])({page:1,limit:e.limit||10,total:0,pageSize:[5,10,20],layout:"sizes,prev,pager,next,total",loading:!1}),a=Object(n["O"])([]),s=()=>{e.listLoader&&"function"===typeof e.listLoader||console.error("请定义一个函数用于获取列表数据"),t.value.loading=!0,e.listLoader({pageNo:t.value.page,pageSize:t.value.limit}).then(e=>{t.value.loading=!1,200==e.code&&(a.value=e.result.records,t.value.total=e.result.total)})};s();const i=e=>{t.page=e,s()},c=e=>{t.page=1,t.limit=e,s()},l=t=>{e.delFun&&"function"===typeof e.delFun||console.error("请定义一个函数用于删除数据"),o["b"].confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.delFun(t).then(()=>{Object(o["a"])({type:"success",message:"删除成功"}).then(s())})})};return{fetchData:s,pageParams:t,onCurrentChange:i,onSizeChange:c,onRowDel:l,pageDatas:a}}},b775:function(e,t,a){"use strict";var n=a("bc3a"),o=a.n(n),s=a("3fd4");const i=o.a.create({baseURL:"",timeout:5e3,withCredentials:!0});i.interceptors.request.use(e=>e,e=>{Promise.reject(e)}),i.interceptors.response.use(e=>{const t=e.data;if(200===t.code)return t;401!=t.code&&s["a"].error(t.message)},e=>(s["a"].error("出错了!"),Promise.reject(e))),t["a"]=i},eae5:function(e,t,a){"use strict";a.r(t);var n=a("7a23");const o={class:"global-tab-con"},s=Object(n["p"])("新增"),i=Object(n["p"])("刷新"),c=Object(n["n"])("br",null,null,-1),l=Object(n["p"])("编辑"),r=Object(n["p"])("删除"),u={class:"global-pagination"};function d(e,t,a,d,b,p){const m=Object(n["S"])("el-button"),g=Object(n["S"])("el-col"),h=Object(n["S"])("el-row"),O=Object(n["S"])("el-table-column"),j=Object(n["S"])("el-switch"),f=Object(n["S"])("el-table"),w=Object(n["S"])("el-pagination"),y=Object(n["S"])("edit-dialog"),C=Object(n["T"])("loading");return Object(n["J"])(),Object(n["m"])("div",o,[Object(n["q"])(h,null,{default:Object(n["hb"])(()=>[Object(n["q"])(g,{span:8,align:"left"},{default:Object(n["hb"])(()=>[Object(n["q"])(m,{type:"primary",icon:"el-icon-plus",size:"small",onClick:t[0]||(t[0]=t=>e.addOrEdit("add"))},{default:Object(n["hb"])(()=>[s]),_:1}),Object(n["q"])(m,{type:"success",icon:"el-icon-refresh",size:"small",onClick:e.fetchData},{default:Object(n["hb"])(()=>[i]),_:1},8,["onClick"])]),_:1})]),_:1}),c,Object(n["ib"])(Object(n["q"])(f,{data:e.dataList,class:"table","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:Object(n["hb"])(()=>[Object(n["q"])(O,{prop:"menuName",label:"菜单名",align:"center"}),Object(n["q"])(O,{prop:"isDisplay",label:"是否显示",align:"center"},{default:Object(n["hb"])(e=>[Object(n["q"])(j,{modelValue:e.row.isDisplay,"onUpdate:modelValue":t=>e.row.isDisplay=t,disabled:"","active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Object(n["q"])(O,{label:"操作",align:"center"},{default:Object(n["hb"])(t=>[Object(n["q"])(m,{type:"text",onClick:a=>e.addOrEdit("edit",t.row)},{default:Object(n["hb"])(()=>[l]),_:2},1032,["onClick"]),Object(n["q"])(m,{type:"text",onClick:a=>e.onRowDel(t.row)},{default:Object(n["hb"])(()=>[r]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[C,e.pageParams.loading]]),Object(n["n"])("div",u,[Object(n["q"])(w,{"current-page":e.pageParams.page,"page-size":e.pageParams.limit,layout:e.pageParams.layout,"page-sizes":e.pageParams.pageSize,total:e.pageParams.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","layout","page-sizes","total","onCurrentChange","onSizeChange"])]),e.showDialog?(Object(n["J"])(),Object(n["k"])(y,{key:0,showDialog:e.showDialog,onHide:e.hide,data:e.data},null,8,["showDialog","onHide","data"])):Object(n["l"])("",!0)])}var b=a("5d1b"),p=(a("b775"),a("4360")),m=a("bc3a"),g=a.n(m),h=a("3fd4");const O=e=>new Promise(t=>{g.a.post("/system/menu/saveBatch",e).then(e=>{t(e)}).catch((function(e){console.log(e)}))}),j=()=>new Promise(e=>{g.a.get("/system/menu/tree",{params:{}}).then((function(t){if(console.log(t.data.result,123),200===t.status){const a=t.data&&t.data.result;p["b"].commit("permissionModule/setMenuList",a),e(t.data)}})).catch((function(e){console.log(e)}))}),f=e=>new Promise(t=>{g.a.get("/system/menu/delete/"+e.id,{params:{}}).then((function(t){if(200===t.code){const t=p["b"].state.permissionModule.menuList;e:for(var a=t.length-1;a>=0;a--){if(t[a].id==e.id){t.splice(a,1);break e}if(t[a].submenu&&t[a].submenu.length)for(var n=t[a].submenu.length-1;n>=0;n--)if(t[a].submenu[n].id==e.id){t[a].submenu.splice(n,1);break e}}p["b"].commit("permissionModule/setMenuList",t)}else Object(h["a"])({type:"success",message:"删除失败"}),j()})).catch((function(e){console.log(e)}))});var w=a("db3f"),y=Object(n["r"])({name:"user-list",components:{[w["c"].name]:w["c"]},setup(){const e=(e,t)=>{p["b"].commit("permissionModule/setShowDialog",!0),"add"===e?a.data={id:"",menuName:"",isDisplay:!1,submenu:[{id:"",menuName:""}]}:(t.isFolder=0===t.type,a.data=t)},t=(e,t)=>{if(p["b"].commit("permissionModule/setShowDialog",!1),"confirm"===e){const e=p["b"].state.permissionModule.menuList;t&&(O([{...t}]).then(e=>{200===e.status&&(t.children&&t.children.length?O(t.children).then(e=>{200===e.status&&Object(h["a"])({type:"success",message:"保存成功"})}):Object(h["a"])({type:"success",message:"保存成功"}))}),p["b"].commit("permissionModule/setMenuList",e))}},a=Object(n["N"])({showDialog:Object(n["i"])(()=>p["b"].state.permissionModule.showDialog),data:{},...Object(b["a"])({listLoader:j,delFun:f}),dataList:Object(n["i"])(()=>p["b"].state.permissionModule.menuList),addOrEdit:e,hide:t});return Object(n["Z"])(a)}});a("5ad0");y.render=d;t["default"]=y},fb60:function(e,t,a){}}]);