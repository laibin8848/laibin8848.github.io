(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{7404:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(2809),i=n(7294),s=n(8022),a=n.n(s),c=n(8465),l=n(5400),o=n(1164),d=n(7399),u=n(5893),p=["queryType","multiple","type","title","fLength"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=e.queryType,n=(e.multiple,e.type),r=e.title,i=e.fLength,s=(0,o.Z)(e,p),a=!!["20"].includes(t)&&1==i;return a?null:(0,u.jsx)(c.Z,h(h({},s),{},{disabled:a,children:"button"==n?(0,u.jsx)(l.default,{type:"primary",size:"large",children:r}):(0,u.jsxs)("div",{style:{background:a?"#ddd":"#1890ff",borderRadius:30,cursor:"pointer",color:"#fff",padding:10,position:"relative"},children:[(0,u.jsx)("div",{style:{width:30,height:30,background:a?"#ddd":"#1890ff",borderRadius:30,position:"absolute",top:-20,left:-10,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,u.jsx)("span",{children:i})}),(0,u.jsx)(d.Z,{style:{fontSize:30}})]})}))}var g=n(1243),y=n(266),x=n(809),m=n.n(x),P=n(9299),b=n(8751);function v(e){var t=e.pdf,n=e.multiple,r=e.onPageChange,s=(0,i.useState)(1),a=s[0],c=s[1],l=(0,i.useRef)([]);return(0,i.useEffect)((function(){var t=e.pdf.uid,r=document.getElementById(t);P.getDocument(URL.createObjectURL(e.pdf.originFileObj)).then(function(){var e=(0,y.Z)(m().mark((function e(t){var i,s,a,l,o,d,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&c(t.numPages),i=0;case 2:if(!(i<t.numPages)){e.next=20;break}return s=r.getElementsByClassName("canvas")[i],e.next=6,t.getPage(i+1);case 6:a=e.sent,.9,l=a.getViewport(.9,100),(o=document.createElement("canvas")).setAttribute("style","width:110px;height:140px; "),d=o.getContext("2d"),o.height=760,o.width=550,u={canvasContext:d,viewport:l},a.render(u),s&&s.appendChild(o);case 17:i++,e.next=2;break;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n?(0,u.jsx)("div",{className:"pdf-multiple-card",id:t.uid,children:function(){for(var e=[],t=function(t){var n=t+1;e.push((0,u.jsxs)("div",{className:"pdf-card canvas",onClick:function(){var e=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=l.current.filter((function(t){return t!=e}));l.current=t}else l.current.push(e);return l.current}(n,l.current.includes(n));r((0,g.Z)(e))},children:[l.current.includes(n)?(0,u.jsx)("span",{className:"selctIcon",children:(0,u.jsx)(b.Z,{})}):null,(0,u.jsx)("span",{className:"pageNo",children:n})]},n))},n=0;n<a;n++)t(n);return e}()}):(0,u.jsxs)("div",{className:"pdf-card",id:t.uid,children:[(0,u.jsx)("div",{className:"canvas"}),(0,u.jsx)("div",{title:t.name,className:"canvas-title",children:t.name})]})}P.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.0.943/pdf.worker.js";var O=n(1163),_=n(1024),w=n(1187),D=n(9681),k=n.n(D),C=n(7603),F=n(4824),E=n(9669),N=n.n(E),Z=null;function I(){var e=(0,i.useState)(!1),t=e[0],n=e[1],r=(0,i.useState)(""),s=r[0],a=r[1],c=(0,i.useState)(null),l=c[0],o=c[1];return(0,i.useEffect)((function(){s&&(Z&&clearInterval(Z),Z=setInterval((function(){(function(e){return N().get("http://120.79.217.12:8000/api/utility/trans_file/".concat(e))})(s).then((function(e){n(!1),o(e.data)}))}),2e3))}),[s]),{loading:t,doUpload:function(e,t,r){n(!0);var i,s=new FormData;e.map((function(e){return s.append("files",e.originFileObj)})),(i=s,N().post("http://120.79.217.12:8000/api/common/upload/",i)).then((function(e){(function(e){return N().post("http://120.79.217.12:8000/api/utility/trans_file/",e)})({transf_type:r,multiple_source_file:e.data.data.results.map((function(e){return e.uid})),other:t}).then((function(e){a(e.data.data.task_id||"")}))}))},clearTimmer:function(){clearInterval(Z)},result:l}}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=document.createElement("a");t.download=Math.random(),t.href=e,t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}var R=function(e){var t=e.pageInfo,n=e.fileList,r=e.type,s=I(),a=s.loading,c=s.doUpload,o=s.clearTimmer,d=s.result,p=(0,i.useState)({operate_type:1}),f=p[0],h=p[1];return(0,i.useEffect)((function(){return function(){o()}}),[]),(0,i.useEffect)((function(){d&&200==d.code&&d.data.result_file&&(S(d.data.result_file),o())}),[d]),(0,u.jsxs)("div",{className:k().optPannel,children:[(0,u.jsx)("h1",{style:{borderBottom:"1px #ddd solid",padding:"25px 10px"},children:t.title||""}),(0,u.jsxs)("div",{className:k().optPanneChoices,children:[(0,u.jsxs)("div",{className:k()["optPanneChoices-item"],onClick:function(){h(T(T({},f),{},{operate_type:1}))},children:["\u65e0 OCR (\u5149\u5b66\u5b57\u7b26\u8bc6\u522b) \u5c06\u5e26\u6709\u53ef\u9009\u6587\u672c\u7684PDF\u6587\u4ef6\u8f6c\u6362\u4e3a\u60a8\u6240\u9700\u6587\u4ef6\u3002",1==f.operate_type?(0,u.jsx)(b.Z,{}):""]}),(0,u.jsxs)("div",{className:k()["optPanneChoices-item"],onClick:function(){h(T(T({},f),{},{operate_type:2}))},children:["OCR\uff08\u5149\u5b66\u5b57\u7b26\u8bc6\u522b\uff09\u5c06\u5e26\u6709\u4e0d\u53ef\u9009\u62e9\u6587\u672c\u7684\u626b\u63cfPDF\u6587\u4ef6\u8f6c\u6362\u4e3a\u60a8\u6240\u9700\u6587\u4ef6\u3002",2==f.operate_type?(0,u.jsx)(b.Z,{}):""]})]}),(0,u.jsx)("div",{style:{position:"absolute",bottom:20,width:"100%"},children:(0,u.jsxs)(l.default,{loading:a,disabled:a,onClick:function(){c(n,f,r)},type:"primary",size:"large",style:{width:"90%",height:"60px"},children:[t.title," ",(0,u.jsx)(C.Z,{})]})})]})},z=function(e){var t=e.pageInfo,n=e.fileList,r=e.type,s=I(),a=s.loading,c=s.doUpload,o=s.clearTimmer,d=s.result,p=["21"].includes(r)&&(!n||1==n.length);return(0,i.useEffect)((function(){return function(){o()}}),[]),(0,i.useEffect)((function(){d&&200==d.code&&d.data.result_file&&(S(d.data.result_file),o())}),[d]),(0,u.jsxs)("div",{className:k().optPannel,children:[(0,u.jsx)("h1",{style:{borderBottom:"1px #ddd solid",padding:"25px 10px"},children:t.title||""}),(0,u.jsx)("div",{className:k().optPanneInfo,children:t.desc||""}),(0,u.jsx)("div",{style:{position:"absolute",bottom:20,width:"100%"},children:(0,u.jsxs)(l.default,{loading:a,disabled:a||p,onClick:function(){c(n,{},r)},type:"primary",size:"large",style:{width:"90%",height:"60px"},children:[t.title," ",(0,u.jsx)(C.Z,{})]})})]})},B=function(e){var t=e.pageInfo,n=e.fileList,r=e.type,s=I(),a=s.loading,c=s.doUpload,o=s.clearTimmer,d=s.result,p=(0,i.useRef)({pwd:"",sec:""});return(0,i.useEffect)((function(){return function(){o()}}),[]),(0,i.useEffect)((function(){d&&200==d.code&&d.data.result_file&&(S(d.data.result_file),o())}),[d]),(0,u.jsxs)("div",{className:k().optPannel,children:[(0,u.jsx)("h1",{style:{borderBottom:"1px #ddd solid",padding:"25px 10px"},children:t.title||""}),(0,u.jsxs)("div",{style:{textAlign:"left",padding:20},children:[(0,u.jsx)("span",{style:{lineHeight:"38px"},children:"\u8bbe\u7f6e\u5bc6\u7801\u6765\u4fdd\u62a4\u4f60\u7684PDF\u6587\u4ef6\uff1a"}),(0,u.jsx)(_.Z.Password,{onInput:function(e){p.current.pwd=e.target.value||""},size:"large",placeholder:"\u8f93\u5165\u4e00\u4e2a\u5bc6\u7801",prefix:(0,u.jsx)(F.Z,{})}),24==r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{style:{lineHeight:"38px"},children:"\u518d\u6b21\u8f93\u5165\u4f60\u7684\u5bc6\u7801"}),(0,u.jsx)(_.Z.Password,{onInput:function(e){p.current.sec=e.target.value||""},size:"large",placeholder:"\u518d\u6b21\u8f93\u5165\u4e00\u4e2a\u5bc6\u7801",prefix:(0,u.jsx)(F.Z,{})})]})]}),(0,u.jsx)("div",{style:{position:"absolute",bottom:20,width:"100%"},children:(0,u.jsxs)(l.default,{loading:a,disabled:a,onClick:function(){(p.current.pwd?p.current.pwd==p.current.sec||24!=r||(w.default.error("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"),0):(w.default.error("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"),0))&&c(n,{password:p.current.pwd},r)},type:"primary",size:"large",style:{width:"90%",height:"60px"},children:[t.title," ",(0,u.jsx)(C.Z,{})]})})]})},U=function(e){var t=e.pageInfo,n=e.fileList,r=e.type,s=e.splitPages,a=I(),c=a.loading,o=a.doUpload,d=a.clearTimmer,p=a.result;return(0,i.useEffect)((function(){return function(){d()}}),[]),(0,i.useEffect)((function(){p&&200==p.code&&p.data.result_file&&(S(p.data.result_file),d())}),[p]),(0,u.jsxs)("div",{className:k().optPannel,children:[(0,u.jsx)("h1",{style:{borderBottom:"1px #ddd solid",padding:"25px 10px"},children:t.title||""}),(0,u.jsxs)("div",{className:k().optPanneInfo,children:["\u5f53\u524d\u9009\u4e2d\u9875\u9762\uff1a",s.join(",")||"\u65e0",(0,u.jsx)("br",{}),t.desc||""]}),(0,u.jsx)("div",{style:{position:"absolute",bottom:20,width:"100%"},children:(0,u.jsxs)(l.default,{loading:c,disabled:c||!s.length,onClick:function(){o(n,{cut_interval:s.join(",")},r)},type:"primary",size:"large",style:{width:"90%",height:"60px"},children:[t.title," ",(0,u.jsx)(C.Z,{})]})})]})};function X(e){var t=e.type;switch(["10","12","14"].includes(e.type)&&(t="ocr"),["11","13","21","22"].includes(e.type)&&(t="none"),t){case"ocr":return(0,u.jsx)(R,T({},e));case"none":return(0,u.jsx)(z,T({},e));case"24":case"25":return(0,u.jsx)(B,T({},e));case"20":return(0,u.jsx)(U,T({},e));case"23":case"26":return(0,u.jsx)(z,T({},e));default:return null}}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(){var e=(0,O.useRouter)().query.type,t=(0,i.useState)([]),n=t[0],r=t[1],s=(0,i.useRef)({title:"",desc:""}),c={name:"files",showUploadList:!1,onChange:function(e){var t=e.fileList;r(t)},fileList:n},l=(0,i.useState)([]),o=l[0],d=l[1];return(0,i.useEffect)((function(){s.current=function(e){var t={title:"",desc:""};switch(e){case"20":t.title="\u62c6\u5206PDF",t.desc="\u62c6\u5206\u51fa1\u4e2a\u9875\u9762\uff0c\u6216\u8005\u6240\u6709\u9875\u9762\uff0c\u4ee5\u4fbf\u5c06\u8fd9\u4e9b\u9875\u9762\u8f6c\u6362\u4e3a\u72ec\u7acb\u7684PDF\u6587\u4ef6\u3002";break;case"21":t.title="\u5408\u5e76PDF",t.desc="\u5408\u5e76PDF\u6587\u4ef6\uff0c\u5e76\u6309\u7167\u60a8\u7684\u559c\u597d\u6392\u5e8f\uff0c\u7b80\u5355\u53c8\u5feb\u901f\uff01";break;case"22":t.title="\u63d0\u53d6\u56fe\u7247",t.desc="\u5408\u5e76PDF\u6587\u4ef6\uff0c\u5e76\u6309\u7167\u60a8\u7684\u559c\u597d\u6392\u5e8f\uff0c\u7b80\u5355\u53c8\u5feb\u901f\uff01";break;case"23":t.title="\u6dfb\u52a0\u6c34\u5370",t.desc="\u53ea\u9700\u51e0\u79d2\u949f\uff0c\u5373\u53ef\u7ed9\u4f60\u7684PDF\u6587\u4ef6\u6dfb\u52a0\u56fe\u7247\u6216\u6587\u5b57\u6c34\u5370\u3002\u53ef\u9009\u62e9\u6c34\u5370\u7684\u4f4d\u7f6e\u3001\u900f\u660e\u5ea6\u548c\u5b57\u4f53\u3002";break;case"24":t.title="PDF\u52a0\u5bc6",t.desc="\u7528\u5bc6\u7801\u7ed9PDF\u6587\u4ef6\u52a0\u5bc6\uff0c \u4ee5\u786e\u4fdd\u654f\u611f\u6570\u636e\u7684\u673a\u5bc6\u6027\u3002";break;case"25":t.title="PDF\u89e3\u5bc6",t.desc="\u5220\u9664PDF\u6587\u4ef6\u7684\u4fdd\u62a4\u5bc6\u7801\uff0c\u4ee5\u4fbf\u60a8\u6309\u7167\u81ea\u5df1\u7684\u9700\u6c42\u4f7f\u7528\u5b83\u3002";break;case"26":t.title="PDF\u6743\u9650\u9650\u5236",t.desc="PDF\u6743\u9650\u9650\u5236";break;case"10":t.title="PDF\u8f6cWORLD",t.desc="\u5c06\u4f60\u7684PDF\u8f6c\u6362\u4e3aWORD\uff0c\u5e76\u4fdd\u6301\u9ad8\u51c6\u786e\u5ea6\u3002 \u6211\u4eec\u5229\u7528 Solid Documents\u7684\u6280\u672f\u3002";break;case"11":t.title="PDF\u8f6c\u56fe\u7247",t.desc="\u63d0\u53d6PDF\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u56fe\u7247\uff0c\u6216\u5c06\u6bcf\u4e00\u9875\u8f6c\u6362\u4e3aJPG\u56fe\u7247\u3002";break;case"12":t.title="PDF\u8f6cTXT",t.desc="\u5c06\u4f60\u7684PDF\u8f6c\u6362\u4e3aTXT\uff0c\u5e76\u4fdd\u6301\u9ad8\u51c6\u786e\u5ea6\u3002";break;case"13":t.title="PDF\u8f6cPPT",t.desc="\u5c06\u4f60\u7684PDF\u8f6c\u6362\u4e3aPPT\uff0c\u5e76\u4fdd\u6301\u9ad8\u51c6\u786e\u5ea6\u3002";break;case"14":t.title="PDF\u8f6cEXCEL",t.desc="\u5c06\u4f60\u7684PDF\u8f6c\u6362\u4e3aEXCEL\uff0c\u5e76\u4fdd\u6301\u9ad8\u51c6\u786e\u5ea6\u3002"}return t}(e),r([])}),[e]),(0,u.jsxs)("div",{className:a().container,children:[(0,u.jsxs)("div",{className:a().mainPannel,children:[!n.length&&(0,u.jsx)("h1",{style:{marginTop:80},children:s.current.title}),!n.length&&(0,u.jsx)("h3",{children:s.current.desc}),(0,u.jsx)(j,W({queryType:e,accept:".pdf",className:n.length?a().plusBtn:"",fLength:n.length,title:n.length?"":"\u9009\u62e9\u4e00\u4e2aPDF\u6587\u4ef6",type:n.length?"":"button"},c)),n.length>0&&(0,u.jsx)("div",{className:a().fileCards,children:n.map((function(t){return(0,u.jsx)(v,{onPageChange:function(e){d(e)},multiple:20==e,pdf:t},t.uid)}))})]}),n.length>0&&(0,u.jsx)(X,{splitPages:o,pageInfo:s.current,fileList:n,type:e})]})}},7863:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pdf",function(){return n(7404)}])},9681:function(e){e.exports={optPannel:"Optional_optPannel__4PHw_",optPanneInfo:"Optional_optPanneInfo__9ztdr",optPanneChoices:"Optional_optPanneChoices__ysK7z","optPanneChoices-item":"Optional_optPanneChoices-item__j2MWq"}},8022:function(e){e.exports={container:"Pdf_container__Milxl",mainPannel:"Pdf_mainPannel__g_Fwp",fileCards:"Pdf_fileCards__PZQj4",plusBtn:"Pdf_plusBtn__dXqYU",grid:"Pdf_grid__GLygI"}},172:function(){},2001:function(){},1895:function(){},2258:function(){}},function(e){e.O(0,[577,821,774,888,179],(function(){return t=7863,e(e.s=t);var t}));var t=e.O();_N_E=t}]);